{{define "fernet-key"}}
<input type="text" id="gen-key" readonly class="flex-1 p-2 border rounded bg-gray-50 font-mono text-sm" value="{{.Key}}">
{{end}}

{{define "fernet-input"}}
<input type="text" name="fernet_key" id="fernet-key" required class="flex-1 p-2 border rounded font-mono text-sm" value="{{.Key}}">
{{end}}

{{define "file-key-input"}}
<input type="text" name="file_key" id="file-key" class="flex-1 p-2 border rounded font-mono text-sm" value="{{.Key}}">
{{end}}

{{define "validate-valid"}}
<span class="text-green-600">✓ Valid Fernet key</span>
{{end}}

{{define "validate-invalid"}}
<span class="text-red-600">✗ Invalid Fernet key</span>
{{end}}

{{define "profiles-list"}}
{{if .Profiles}}
<div class="space-y-3">
    {{range .Profiles}}
    <div class="flex items-center justify-between p-4 border rounded hover:bg-gray-50">
        <div>
            <h4 class="font-medium">{{.Name}}</h4>
            <p class="text-sm text-gray-500">{{.DBHost}}/{{.DBName}}</p>
        </div>
        <div class="flex gap-2 items-center">
            <span id="test-{{.ID}}" class="text-sm"></span>
            <button hx-post="/htmx/profiles/test" hx-vals='{"id":"{{.ID}}"}' hx-target="#test-{{.ID}}" class="px-3 py-1 text-sm bg-gray-100 rounded hover:bg-gray-200">Test</button>
            <button onclick="openModal('{{.ID}}')" class="px-3 py-1 text-sm bg-indigo-100 text-indigo-700 rounded hover:bg-indigo-200">Edit</button>
            <button hx-delete="/htmx/profiles/{{.ID}}" hx-target="#profiles-list" hx-confirm="Delete '{{.Name}}'?" class="px-3 py-1 text-sm bg-red-100 text-red-700 rounded hover:bg-red-200">Delete</button>
        </div>
    </div>
    {{end}}
</div>
{{else}}
<p class="text-gray-500">No profiles yet. Create one to get started.</p>
{{end}}
{{end}}

{{define "connections-list"}}
{{if .Connections}}
<div class="space-y-1">
    <label class="flex items-center gap-2 text-sm mb-2 font-medium">
        <input type="checkbox" checked onchange="document.querySelectorAll('input[name=connection_ids]').forEach(c=>c.checked=this.checked)">
        Select All ({{len .Connections}})
    </label>
    {{range .Connections}}
    <label class="flex items-center gap-2 text-sm">
        <input type="checkbox" name="connection_ids" value="{{.ID}}" checked>
        <span class="font-mono">{{.ID}}</span>
        <span class="text-gray-400">({{.ConnType}})</span>
    </label>
    {{end}}
</div>
{{else if .Error}}
<p class="text-red-500 text-sm">{{.Error}}</p>
{{else}}
<p class="text-gray-500 text-sm">No connections found</p>
{{end}}
{{end}}

{{define "export-result"}}
{{if .Success}}
<div class="p-4 bg-green-50 border border-green-200 rounded">
    <h4 class="font-medium text-green-800">✓ Export Successful</h4>
    <p class="text-sm text-green-700 mt-1">Exported {{.ConnectionCount}} connections</p>
    {{if .DownloadURL}}
    <div class="mt-3">
        <a href="{{.DownloadURL}}" class="inline-flex items-center px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700">
            <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"></path>
            </svg>
            Download {{.OutputPath}}
        </a>
    </div>
    {{end}}
    {{if .FileEncryptionKey}}
    <div class="mt-3 p-2 bg-white rounded border">
        <p class="text-xs text-gray-600 mb-1">File Encryption Key (save this!):</p>
        <code class="text-sm font-mono break-all select-all">{{.FileEncryptionKey}}</code>
    </div>
    {{end}}
</div>
{{else}}
<div class="p-4 bg-red-50 border border-red-200 rounded">
    <h4 class="font-medium text-red-800">✗ Export Failed</h4>
    <p class="text-sm text-red-700 mt-1">{{.Error}}</p>
</div>
{{end}}
{{end}}

{{define "import-result"}}
{{if .Success}}
<div class="p-4 bg-green-50 border border-green-200 rounded">
    <h4 class="font-medium text-green-800">✓ Import Successful</h4>
    <ul class="text-sm text-green-700 mt-1">
        {{if .ImportedCount}}<li>Imported: {{.ImportedCount}}</li>{{end}}
        {{if .SkippedCount}}<li>Skipped: {{.SkippedCount}}</li>{{end}}
        {{if .OverwrittenCount}}<li>Overwritten: {{.OverwrittenCount}}</li>{{end}}
    </ul>
</div>
{{else}}
<div class="p-4 bg-red-50 border border-red-200 rounded">
    <h4 class="font-medium text-red-800">✗ Import Failed</h4>
    <p class="text-sm text-red-700 mt-1">{{.Error}}</p>
</div>
{{end}}
{{end}}

{{define "import-connections-list"}}
{{if .Records}}
<div class="space-y-1">
    <label class="flex items-center gap-2 text-sm mb-2 font-medium">
        <input type="checkbox" checked onchange="document.querySelectorAll('input[name=connection_ids]').forEach(c=>c.checked=this.checked)">
        Select All ({{len .Records}})
    </label>
    {{range .Records}}
    <label class="flex items-center gap-2 text-sm">
        <input type="checkbox" name="connection_ids" value="{{.ConnID}}" checked>
        <span class="font-mono">{{.ConnID}}</span>
        <span class="text-gray-400">({{.ConnType}})</span>
    </label>
    {{end}}
</div>
{{else}}
<p class="text-gray-500 text-sm">No connections found in file</p>
{{end}}
{{end}}

{{define "test-success"}}
<span class="text-green-600 text-sm">✓ OK</span>
{{end}}

{{define "test-fail"}}
<span class="text-red-600 text-sm">✗ Failed</span>
{{end}}